import React, { useState, useRef, useEffect } from "react";
import "./App.css";
import Box from "./Box"; // Your Box component
import logo from "./assets/logo.png";
import { FaCamera } from "react-icons/fa";
import html2canvas from "html2canvas";
// import pipes from "./assets/pipes.png";
// import jsPDF from "jspdf";
// import HLSPlayer from "./HLSPlayer";
// import { RiNumber1 } from "react-icons/ri";
// import domtoimage from "dom-to-image-more";

const App = () => {
  const [boxes, setBoxes] = useState([
    [
      187.8782958984375, 21.150320053100586, 233.10922241210938,
      66.68363189697266, 2,
    ],
    [
      305.44024658203125, 22.138662338256836, 350.69659423828125,
      67.43641662597656, 2,
    ],
    [
      361.26422119140625, 24.50763511657715, 406.1716003417969, 70.2666015625,
      2,
    ],
    [
      242.08351135253906, 24.939411163330078, 287.4119873046875,
      70.591064453125, 2,
    ],
    [
      417.2679138183594, 29.425643920898438, 462.2292175292969,
      74.41205596923828, 2,
    ],
    [
      473.051025390625, 30.761653900146484, 518.04736328125, 76.32794189453125,
      2,
    ],
    [
      529.6255493164062, 34.58107376098633, 574.1351318359375,
      79.88988494873047, 2,
    ],
    [
      584.0564575195312, 38.280513763427734, 629.0215454101562,
      83.48259735107422, 2,
    ],
    [
      118.8985824584961, 54.36491394042969, 164.1964111328125,
      100.07866668701172, 2,
    ],
    [
      275.49267578125, 56.404685974121094, 321.75457763671875,
      101.07034301757812, 2,
    ],
    [
      332.09100341796875, 59.893253326416016, 377.8072814941406,
      104.45643615722656, 2,
    ],
    [
      213.5374755859375, 59.66730499267578, 258.96014404296875,
      104.6931381225586, 2,
    ],
    [
      166.4698486328125, 61.11170959472656, 212.07899475097656,
      106.78656768798828, 2,
    ],
    [
      386.5489807128906, 62.56888198852539, 432.1721496582031,
      107.25408172607422, 2,
    ],
    [
      801.7755737304688, 65.55854034423828, 846.3276977539062,
      110.30297088623047, 2,
    ],
    [
      442.14508056640625, 66.02617645263672, 488.2834167480469,
      110.30228424072266, 2,
    ],
    [
      498.2347412109375, 69.00251007080078, 543.7630615234375,
      113.67535400390625, 2,
    ],
    [
      553.9641723632812, 73.22273254394531, 599.3773193359375,
      117.41275024414062, 2,
    ],
    [
      609.3618774414062, 76.12931060791016, 654.2308959960938,
      120.40483856201172, 2,
    ],
    [
      672.2269287109375, 87.46160125732422, 716.9482421875, 131.30520629882812,
      2,
    ],
    [
      92.27599334716797, 90.67980194091797, 137.29017639160156,
      135.52969360351562, 2,
    ],
    [
      717.7387084960938, 94.5679702758789, 761.9349975585938,
      138.83074951171875, 2,
    ],
    [
      241.07130432128906, 90.98558807373047, 296.2244873046875,
      145.24066162109375, 3,
    ],
    [
      138.08151245117188, 96.49047088623047, 183.9990692138672,
      140.69790649414062, 2,
    ],
    [
      297.0944519042969, 93.53372192382812, 351.83038330078125,
      147.97300720214844, 3,
    ],
    [
      191.82339477539062, 98.66690826416016, 238.0630645751953,
      143.10935974121094, 2,
    ],
    [
      772.6318969726562, 98.91267395019531, 817.3759155273438,
      143.80906677246094, 2,
    ],
    [
      352.2544250488281, 97.23301696777344, 407.29888916015625,
      151.28404235839844, 3,
    ],
    [
      827.2891235351562, 102.11092376708984, 871.315185546875,
      146.7701873779297, 2,
    ],
    [
      407.85870361328125, 99.83786010742188, 462.66162109375, 153.9853057861328,
      3,
    ],
    [
      463.8349609375, 102.94271850585938, 518.6536865234375, 157.72882080078125,
      3,
    ],
    [
      519.0858154296875, 106.59490966796875, 574.0162353515625,
      160.03549194335938, 3,
    ],
    [
      941.316162109375, 112.60293579101562, 985.0955200195312,
      157.99591064453125, 2,
    ],
    [
      891.13525390625, 113.64655303955078, 934.8163452148438, 158.356689453125,
      2,
    ],
    [
      574.5037231445312, 110.17367553710938, 629.225341796875,
      164.5005340576172, 3,
    ],
    [
      1028.5677490234375, 116.965087890625, 1072.025634765625,
      161.75253295898438, 2,
    ],
    [
      629.78369140625, 113.43737030029297, 684.4856567382812, 168.0483856201172,
      3,
    ],
    [
      1078.48291015625, 122.69775390625, 1123.4024658203125, 167.6039276123047,
      2,
    ],
    [
      64.4392318725586, 124.5250015258789, 108.49939727783203,
      171.17990112304688, 2,
    ],
    [
      688.519287109375, 127.98934173583984, 733.9437866210938,
      172.18797302246094, 2,
    ],
    [
      742.207275390625, 131.85708618164062, 787.8912353515625,
      175.95298767089844, 2,
    ],
    [798.1298828125, 134.91796875, 843.1461181640625, 179.88998413085938, 2],
    [
      105.27664184570312, 131.5845184326172, 158.76657104492188,
      187.20257568359375, 3,
    ],
    [
      159.03582763671875, 133.44349670410156, 212.61715698242188,
      188.9392547607422, 3,
    ],
    [
      851.7263793945312, 139.80393981933594, 897.2373657226562,
      183.84442138671875, 2,
    ],
    [
      213.2046356201172, 136.4181365966797, 267.1815490722656,
      191.4852294921875, 3,
    ],
    [
      267.6385803222656, 139.1315155029297, 322.10357666015625,
      194.20603942871094, 3,
    ],
    [
      322.8246154785156, 142.25906372070312, 377.5814514160156,
      196.9258270263672, 3,
    ],
    [
      377.9769287109375, 144.86654663085938, 432.6648254394531,
      199.3947296142578, 3,
    ],
    [
      913.6757202148438, 150.2515106201172, 957.8023071289062,
      195.4586944580078, 2,
    ],
    [
      433.0502014160156, 147.72833251953125, 488.2074279785156,
      202.3197021484375, 3,
    ],
    [
      958.7389526367188, 153.33961486816406, 1002.768798828125,
      199.0345001220703, 2,
    ],
    [
      1004.062255859375, 155.09014892578125, 1047.9873046875, 199.7698211669922,
      2,
    ],
    [
      488.8117370605469, 151.5600128173828, 543.7164306640625,
      205.70098876953125, 3,
    ],
    [
      1048.326416015625, 155.96290588378906, 1091.99462890625,
      201.4036865234375, 2,
    ],
    [
      544.0470581054688, 154.88726806640625, 598.8408813476562,
      208.89515686035156, 3,
    ],
    [
      1101.1590576171875, 160.13726806640625, 1146.3978271484375,
      204.78817749023438, 2,
    ],
    [
      599.1865844726562, 158.31005859375, 653.878662109375, 212.68890380859375,
      3,
    ],
    [
      654.2236938476562, 161.78627014160156, 708.5390014648438,
      216.36167907714844, 3,
    ],
    [
      1146.738525390625, 169.0831756591797, 1191.6474609375, 213.24058532714844,
      2,
    ],
    [708.98046875, 165.00814819335938, 763.6419677734375, 219.7473907470703, 3],
    [
      764.0543823242188, 169.079833984375, 818.1080932617188,
      223.22549438476562, 3,
    ],
    [
      66.86405181884766, 172.12977600097656, 122.0969467163086,
      227.65753173828125, 3,
    ],
    [
      818.583251953125, 173.0683135986328, 872.18994140625, 227.66189575195312,
      3,
    ],
    [
      872.461669921875, 177.57740783691406, 926.70751953125, 231.39344787597656,
      3,
    ],
    [
      1189.667724609375, 183.3085479736328, 1232.8028564453125,
      228.99327087402344, 2,
    ],
    [
      127.3077621459961, 179.94058227539062, 182.71046447753906,
      234.46487426757812, 3,
    ],
    [
      183.17820739746094, 182.631103515625, 237.77810668945312,
      237.29754638671875, 3,
    ],
    [
      238.26400756835938, 185.4583282470703, 292.5610656738281,
      239.98007202148438, 3,
    ],
    [
      293.1329345703125, 187.72662353515625, 347.6996154785156,
      242.55319213867188, 3,
    ],
    [
      931.9175415039062, 193.13343811035156, 977.14013671875, 237.2606658935547,
      2,
    ],
    [
      978.9407958984375, 193.4359130859375, 1023.3541870117188,
      237.437255859375, 2,
    ],
    [
      1024.198974609375, 194.7113037109375, 1067.716796875, 238.5808868408203,
      2,
    ],
    [
      348.2563171386719, 190.512939453125, 403.07415771484375,
      244.87217712402344, 3,
    ],
    [
      1068.7257080078125, 196.0531463623047, 1112.755859375, 239.8899688720703,
      2,
    ],
    [
      403.4970397949219, 192.9477996826172, 457.8118896484375,
      247.58648681640625, 3,
    ],
    [
      458.473388671875, 195.8966522216797, 513.24462890625, 250.86923217773438,
      3,
    ],
    [
      1111.70361328125, 203.87783813476562, 1155.116455078125, 247.066650390625,
      2,
    ],
    [
      514.3068237304688, 199.65550231933594, 568.1376342773438,
      253.72972106933594, 3,
    ],
    [
      568.9038696289062, 203.02052307128906, 623.2036743164062,
      258.0202331542969, 3,
    ],
    [
      623.7609252929688, 206.77218627929688, 678.5620727539062,
      261.1275634765625, 3,
    ],
    [
      1153.984130859375, 213.4535369873047, 1198.5294189453125, 256.908203125,
      2,
    ],
    [
      679.0030517578125, 210.3230743408203, 733.49853515625, 264.9224548339844,
      3,
    ],
    [
      733.921142578125, 213.6878204345703, 788.0631103515625, 268.1527404785156,
      3,
    ],
    [
      90.94465637207031, 220.54302978515625, 146.16932678222656,
      264.3899230957031, 3,
    ],
    [
      788.5519409179688, 217.6005096435547, 842.2101440429688, 271.418701171875,
      3,
    ],
    [
      1210.0396728515625, 222.70968627929688, 1254.182861328125,
      266.6124267578125, 2,
    ],
    [
      151.71165466308594, 227.88311767578125, 207.5074005126953,
      268.61181640625, 3,
    ],
    [
      843.189208984375, 221.73570251464844, 897.3120727539062,
      275.8500061035156, 3,
    ],
    [
      208.28636169433594, 230.92347717285156, 263.0569763183594,
      271.7824401855469, 3,
    ],
    [
      897.513671875, 225.85447692871094, 951.2716064453125, 279.9841613769531,
      3,
    ],
    [
      263.6423034667969, 233.6337890625, 318.10748291015625, 275.5863952636719,
      3,
    ],
    [
      318.7181091308594, 236.06918334960938, 373.2153625488281,
      278.657470703125, 3,
    ],
    [
      951.9008178710938, 231.4080047607422, 1005.3716430664062,
      285.8121032714844, 3,
    ],
    [
      373.848388671875, 238.3156280517578, 427.9759216308594, 281.4720458984375,
      3,
    ],
    [
      1005.9168701171875, 236.73728942871094, 1059.7874755859375,
      290.4189147949219, 3,
    ],
    [
      428.9169921875, 241.25331115722656, 483.3644104003906, 286.0800476074219,
      3,
    ],
    [
      484.017333984375, 244.6834716796875, 538.1011352539062, 289.2498474121094,
      3,
    ],
    [
      1060.9498291015625, 240.38563537597656, 1115.7467041015625,
      294.1670837402344, 3,
    ],
    [
      91.31623077392578, 264.2231750488281, 146.77752685546875,
      274.8337097167969, 3,
    ],
    [
      538.8980102539062, 247.81118774414062, 593.14990234375, 292.9279479980469,
      3,
    ],
    [
      1117.8416748046875, 246.42733764648438, 1171.87109375, 300.16229248046875,
      3,
    ],
    [
      593.8460083007812, 251.47360229492188, 648.2579956054688,
      296.3690490722656, 3,
    ],
    [
      151.6379852294922, 268.97821044921875, 207.2898712158203,
      282.3702697753906, 3,
    ],
    [
      648.8284912109375, 254.85003662109375, 703.5175170898438,
      300.17034912109375, 3,
    ],
    [
      1171.893310546875, 251.6786651611328, 1224.3665771484375,
      305.9396667480469, 3,
    ],
    [
      208.19741821289062, 272.29473876953125, 262.137939453125,
      285.5287780761719, 3,
    ],
    [
      704.0159301757812, 258.6302185058594, 758.5018310546875,
      304.2221374511719, 3,
    ],
    [
      263.46295166015625, 275.2337646484375, 317.8143615722656,
      288.4878234863281, 3,
    ],
    [
      318.7534484863281, 278.5585021972656, 372.8221435546875,
      290.9219970703125, 3,
    ],
    [
      759.1653442382812, 262.16925048828125, 813.0260009765625,
      308.06195068359375, 3,
    ],
    [
      374.489501953125, 281.1044616699219, 427.77496337890625,
      293.2778015136719, 3,
    ],
    [1223.3037109375, 266.2867736816406, 1266.6630859375, 309.5607604980469, 2],
    [
      813.5663452148438, 266.1004333496094, 867.3864135742188,
      311.8979187011719, 3,
    ],
    [
      431.7696838378906, 285.39837646484375, 482.7779235839844,
      296.442138671875, 3,
    ],
    [
      867.9661865234375, 270.09881591796875, 921.5645141601562,
      315.3476257324219, 3,
    ],
    [
      482.2951354980469, 288.77301025390625, 537.0174560546875,
      299.0269775390625, 3,
    ],
    [
      67.13054656982422, 268.8741149902344, 121.11980438232422,
      324.9571838378906, 3,
    ],
    [
      922.0665893554688, 274.7908935546875, 975.9833984375, 320.1103210449219,
      3,
    ],
    [537.916748046875, 292.7264404296875, 593.322998046875, 302.86474609375, 3],
    [
      121.58344268798828, 272.2459716796875, 176.1297607421875,
      326.9537048339844, 3,
    ],
    [
      594.778076171875, 295.6322937011719, 647.0721435546875,
      306.26849365234375, 3,
    ],
    [
      976.548828125, 280.1736145019531, 1031.0277099609375, 323.8884582519531,
      3,
    ],
    [
      177.18751525878906, 276.8336486816406, 232.52000427246094,
      330.8697814941406, 3,
    ],
    [
      648.7715454101562, 299.73065185546875, 702.5990600585938,
      309.9105224609375, 3,
    ],
    [
      1031.574951171875, 284.7028503417969, 1085.57080078125, 328.6717834472656,
      3,
    ],
    [
      233.1527557373047, 279.99462890625, 288.14910888671875, 334.4924011230469,
      3,
    ],
    [
      702.8861694335938, 303.700439453125, 756.0805053710938,
      313.12017822265625, 3,
    ],
    [
      1086.227294921875, 288.801513671875, 1140.1895751953125,
      331.7845764160156, 3,
    ],
    [
      288.8968811035156, 283.28607177734375, 343.76995849609375,
      337.78387451171875, 3,
    ],
    [
      757.0914916992188, 307.07196044921875, 813.3356323242188,
      317.05047607421875, 3,
    ],
    [
      344.267333984375, 285.2676086425781, 398.9351806640625,
      340.01800537109375, 3,
    ],
    [
      399.4855651855469, 287.2701721191406, 453.97161865234375,
      342.5314636230469, 3,
    ],
    [
      813.8235473632812, 311.17431640625, 867.7855224609375, 320.8542785644531,
      3,
    ],
    [
      1141.4549560546875, 295.0207824707031, 1195.6400146484375, 337.0927734375,
      3,
    ],
    [
      454.5260314941406, 292.1580810546875, 508.83941650390625,
      346.3741149902344, 3,
    ],
    [
      869.864013671875, 313.91827392578125, 921.1290893554688, 324.95263671875,
      3,
    ],
    [
      509.25982666015625, 295.43560791015625, 564.2086181640625,
      350.5382385253906, 3,
    ],
    [922.684326171875, 319.3734130859375, 975.1806030273438, 328.7421875, 3],
    [
      1204.4697265625, 307.27374267578125, 1256.87646484375, 341.9051208496094,
      3,
    ],
    [564.947265625, 298.0150451660156, 619.11181640625, 353.100830078125, 3],
    [
      976.9915161132812, 322.9869384765625, 1029.273193359375,
      334.0797424316406, 3,
    ],
    [
      619.9287109375, 301.4516296386719, 674.4998168945312, 356.0537414550781,
      3,
    ],
    [
      675.0699462890625, 305.0933532714844, 729.283935546875,
      359.73345947265625, 3,
    ],
    [
      1031.40576171875, 327.7355041503906, 1084.842041015625, 338.3355712890625,
      3,
    ],
    [
      729.872314453125, 309.06976318359375, 783.9161376953125,
      363.5786437988281, 3,
    ],
    [1086.83154296875, 331.0753173828125, 1139.134765625, 342.908935546875, 3],
    [
      784.7415161132812, 312.1794128417969, 839.0325927734375,
      366.96075439453125, 3,
    ],
    [
      1142.40380859375, 336.2963562011719, 1194.6851806640625,
      348.6769104003906, 3,
    ],
    [
      839.32861328125, 316.298095703125, 892.244873046875, 370.73028564453125,
      3,
    ],
    [
      92.675537109375, 318.0859069824219, 147.07046508789062,
      372.41925048828125, 3,
    ],
    [
      893.206787109375, 320.29840087890625, 947.01611328125, 374.612548828125,
      3,
    ],
    [
      147.45095825195312, 320.8246765136719, 202.3095703125, 375.85223388671875,
      3,
    ],
    [
      947.5696411132812, 324.5895080566406, 1001.5653686523438,
      378.4258728027344, 3,
    ],
    [
      1204.188720703125, 340.9369201660156, 1258.1893310546875,
      362.3254089355469, 3,
    ],
    [
      202.94671630859375, 325.10870361328125, 258.0732421875, 378.9405212402344,
      3,
    ],
    [
      258.673828125, 328.1818542480469, 314.16119384765625, 382.10809326171875,
      3,
    ],
    [
      1002.0919189453125, 329.05755615234375, 1055.767578125, 382.8894958496094,
      3,
    ],
    [
      314.86981201171875, 331.06451416015625, 369.59149169921875,
      385.8448486328125, 3,
    ],
    [
      1056.1375732421875, 333.38275146484375, 1109.9945068359375,
      387.1566162109375, 3,
    ],
    [
      369.95294189453125, 333.55303955078125, 424.4644470214844,
      388.8120422363281, 3,
    ],
    [425.0220031738281, 336.8125, 479.2630615234375, 391.8600769042969, 3],
    [
      1110.4569091796875, 337.784912109375, 1164.513671875, 391.6826477050781,
      3,
    ],
    [
      479.87567138671875, 340.74639892578125, 534.5701293945312,
      395.306396484375, 4,
    ],
    [
      1166.280517578125, 343.96343994140625, 1220.717529296875,
      398.0689392089844, 3,
    ],
    [
      535.1030883789062, 344.16143798828125, 590.2470703125, 398.65545654296875,
      4,
    ],
    [590.752197265625, 346.8796691894531, 645.4599609375, 401.8089294433594, 4],
    [
      645.8587036132812, 350.3793029785156, 700.2123413085938,
      405.31719970703125, 4,
    ],
    [
      701.0709838867188, 353.8616027832031, 755.7693481445312,
      409.22161865234375, 4,
    ],
    [
      756.0595092773438, 357.7074279785156, 809.48388671875, 412.4193115234375,
      4,
    ],
    [
      810.0877685546875, 361.08807373046875, 863.4600830078125,
      416.1700744628906, 4,
    ],
    [
      64.1771469116211, 363.6824951171875, 119.22026824951172,
      418.9048767089844, 3,
    ],
    [
      863.957275390625, 365.3166809082031, 917.6464233398438, 420.0105285644531,
      4,
    ],
    [
      119.5380630493164, 366.29071044921875, 173.0448760986328,
      421.48040771484375, 3,
    ],
    [
      918.0701293945312, 369.0082092285156, 971.8551025390625,
      423.6942138671875, 4,
    ],
    [
      173.93710327148438, 369.50762939453125, 228.31321716308594,
      423.9200744628906, 3,
    ],
    [
      228.60752868652344, 373.0201416015625, 283.51531982421875,
      427.66632080078125, 4,
    ],
    [
      972.38427734375, 373.04925537109375, 1026.33935546875, 427.96014404296875,
      4,
    ],
    [
      284.1173095703125, 376.4791564941406, 339.2055969238281,
      430.5821838378906, 4,
    ],
    [
      1026.822021484375, 377.4322204589844, 1079.8524169921875,
      431.8726806640625, 3,
    ],
    [
      339.8849182128906, 379.453857421875, 394.8157653808594, 434.1142272949219,
      4,
    ],
    [
      1080.155517578125, 381.85430908203125, 1133.4371337890625,
      436.3174743652344, 3,
    ],
    [
      395.2127990722656, 382.4888610839844, 449.5798645019531,
      437.49798583984375, 4,
    ],
    [
      1134.0506591796875, 386.01556396484375, 1188.35888671875,
      440.2005920410156, 3,
    ],
    [
      450.0810852050781, 385.8629150390625, 504.5298156738281,
      440.7459716796875, 4,
    ],
    [
      505.22491455078125, 389.470703125, 560.085205078125, 443.80096435546875,
      4,
    ],
    [1189.960205078125, 392.9244689941406, 1244.123046875, 446.8017578125, 3],
    [
      560.6991577148438, 392.5455017089844, 615.3583984375, 447.37274169921875,
      4,
    ],
    [
      615.865478515625, 395.9798583984375, 670.5042724609375, 450.3805236816406,
      4,
    ],
    [
      671.0722045898438, 399.51470947265625, 725.4323120117188,
      454.05853271484375, 4,
    ],
    [
      726.0234985351562, 403.0494689941406, 780.126953125, 457.79571533203125,
      4,
    ],
    [
      780.5501708984375, 406.78790283203125, 834.0509033203125,
      461.6794738769531, 4,
    ],
    [
      834.8355102539062, 410.47772216796875, 888.4381713867188,
      465.4096984863281, 4,
    ],
    [
      89.97832489013672, 412.7052917480469, 144.79185485839844,
      467.0283508300781, 4,
    ],
    [
      889.0249633789062, 414.3480529785156, 942.4530639648438,
      468.9461669921875, 4,
    ],
    [
      145.35275268554688, 414.8392333984375, 198.9410400390625,
      469.9976501464844, 4,
    ],
    [943.1563720703125, 418.0203857421875, 996.23046875, 473.0258483886719, 4],
    [
      199.58578491210938, 418.0079345703125, 253.64012145996094,
      473.0773010253906, 4,
    ],
    [
      254.1592559814453, 421.14666748046875, 308.99383544921875,
      475.20538330078125, 4,
    ],
    [996.90625, 422.3565368652344, 1050.3458251953125, 477.2033996582031, 4],
    [
      309.4674377441406, 424.36407470703125, 364.25750732421875,
      478.18389892578125, 4,
    ],
    [
      1051.4837646484375, 427.071533203125, 1105.14306640625,
      482.02459716796875, 4,
    ],
    [
      364.89385986328125, 427.7260437011719, 419.6463928222656,
      481.7043151855469, 4,
    ],
    [
      1105.0401611328125, 430.83636474609375, 1156.89794921875,
      484.9218444824219, 4,
    ],
    [
      420.0522766113281, 431.2079772949219, 474.66046142578125,
      485.53826904296875, 4,
    ],
    [
      475.1894226074219, 434.5818176269531, 529.5155639648438,
      488.9145202636719, 4,
    ],
    [
      1157.7039794921875, 434.8269348144531, 1211.1585693359375,
      488.8582763671875, 4,
    ],
    [
      530.2146606445312, 437.64794921875, 584.5819702148438, 492.1641540527344,
      4,
    ],
    [
      585.0863647460938, 441.1898498535156, 640.3495483398438,
      495.3529968261719, 4,
    ],
    [
      641.2459106445312, 444.76531982421875, 695.8433227539062,
      499.618896484375, 4,
    ],
    [
      696.834228515625, 448.68365478515625, 750.7393188476562,
      503.43487548828125, 4,
    ],
    [
      751.090576171875, 451.9808654785156, 804.1881103515625, 506.3695373535156,
      4,
    ],
    [
      804.7593994140625, 456.0935974121094, 858.3506469726562,
      510.0989685058594, 4,
    ],
    [
      61.743595123291016, 458.4306335449219, 115.75189971923828,
      513.0586547851562, 4,
    ],
    [
      858.8772583007812, 459.54656982421875, 912.1022338867188,
      514.1258544921875, 4,
    ],
    [
      116.34597778320312, 460.44476318359375, 168.65652465820312,
      515.7493286132812, 4,
    ],
    [
      912.791748046875, 463.05767822265625, 965.7235717773438,
      517.7257690429688, 4,
    ],
    [
      168.04885864257812, 464.45648193359375, 223.3367462158203,
      518.86865234375, 4,
    ],
    [
      224.3741912841797, 466.72161865234375, 278.76019287109375,
      520.3947143554688, 4,
    ],
    [
      966.3169555664062, 467.142333984375, 1019.35693359375, 521.6600341796875,
      4,
    ],
    [
      279.58673095703125, 469.0056457519531, 334.2235107421875,
      523.0115966796875, 4,
    ],
    [
      1019.684326171875, 471.34124755859375, 1072.4132080078125, 525.9306640625,
      4,
    ],
    [
      334.72705078125, 472.4593505859375, 389.0270690917969, 526.3948364257812,
      4,
    ],
    [
      389.62841796875, 475.99090576171875, 444.2331848144531, 530.1646118164062,
      4,
    ],
    [
      1073.3177490234375, 475.6432800292969, 1126.265869140625,
      530.8180541992188, 4,
    ],
    [
      444.80548095703125, 479.6033630371094, 499.4202575683594,
      533.7479858398438, 4,
    ],
    [
      1127.1026611328125, 479.28955078125, 1179.6531982421875,
      534.2910766601562, 4,
    ],
    [
      499.8226013183594, 482.7456970214844, 554.3064575195312, 536.777587890625,
      4,
    ],
    [
      1180.4771728515625, 484.20782470703125, 1233.7484130859375, 538.724609375,
      4,
    ],
    [
      554.9501342773438, 485.7038879394531, 609.5714721679688,
      539.9948120117188, 4,
    ],
    [
      609.6039428710938, 488.4367980957031, 663.9974975585938, 541.24462890625,
      4,
    ],
    [
      664.8427124023438, 493.08428955078125, 719.6668701171875,
      547.0297241210938, 4,
    ],
    [
      720.1683959960938, 496.80352783203125, 773.9102172851562,
      550.7154541015625, 4,
    ],
    [774.0872192382812, 500.1961669921875, 827.736328125, 554.4532470703125, 4],
    [
      828.4783935546875, 504.3179016113281, 882.4974975585938,
      558.3153686523438, 4,
    ],
    [
      83.32087707519531, 507.9684143066406, 137.86761474609375,
      562.0432739257812, 4,
    ],
    [882.99609375, 508.4624938964844, 936.3433227539062, 562.9307861328125, 4],
    [
      138.6532745361328, 509.14910888671875, 193.43800354003906,
      562.788330078125, 4,
    ],
    [
      194.0056915283203, 511.50537109375, 248.20558166503906, 565.245361328125,
      4,
    ],
    [
      936.7713012695312, 511.9466552734375, 989.557861328125, 566.4691772460938,
      4,
    ],
    [
      248.50697326660156, 514.5023193359375, 303.2679138183594,
      568.668212890625, 4,
    ],
    [
      990.0503540039062, 516.2176513671875, 1042.441162109375, 570.673095703125,
      4,
    ],
    [
      303.8247985839844, 517.5146484375, 358.7251281738281, 571.5758666992188,
      4,
    ],
    [
      1042.1873779296875, 519.8204956054688, 1093.2266845703125,
      574.1354370117188, 4,
    ],
    [
      359.1543884277344, 521.0545654296875, 413.8908996582031,
      575.0303955078125, 4,
    ],
    [
      414.3582763671875, 524.8003540039062, 468.68719482421875,
      578.8662719726562, 4,
    ],
    [
      1097.0611572265625, 525.2625122070312, 1148.6688232421875,
      581.0828247070312, 4,
    ],
    [
      469.15325927734375, 527.9315795898438, 524.2222290039062,
      582.1691284179688, 4,
    ],
    [
      1148.219970703125, 527.1158447265625, 1196.8441162109375, 583.6435546875,
      4,
    ],
    [
      524.6973876953125, 531.4335327148438, 579.7651977539062,
      585.1844482421875, 4,
    ],
    [580.42333984375, 534.00830078125, 634.814697265625, 588.8142700195312, 4],
    [635.443359375, 537.515380859375, 689.9960327148438, 592.1422729492188, 4],
    [690.1454467773438, 541.4439697265625, 744.06640625, 595.5641479492188, 4],
    [
      744.8373413085938, 545.2728271484375, 799.1016235351562,
      599.6471557617188, 4,
    ],
    [
      1192.508056640625, 544.6011962890625, 1248.8743896484375,
      602.0526733398438, 4,
    ],
    [
      51.12350082397461, 547.4378662109375, 103.32745361328125,
      602.5153198242188, 4,
    ],
    [799.441650390625, 549.2310180664062, 853.4694213867188, 602.79296875, 4],
    [
      854.09912109375, 553.4351806640625, 908.1851196289062, 607.8292236328125,
      4,
    ],
    [
      107.32647705078125, 554.386474609375, 163.10165405273438,
      607.2042236328125, 4,
    ],
    [
      163.38572692871094, 556.191650390625, 217.6308135986328, 609.876708984375,
      4,
    ],
    [
      908.5664672851562, 557.398681640625, 961.8281860351562, 611.7733154296875,
      4,
    ],
    [
      217.9144744873047, 559.2923583984375, 272.6761779785156,
      613.4013061523438, 4,
    ],
    [
      273.49822998046875, 561.619384765625, 327.9760437011719, 615.387451171875,
      4,
    ],
    [
      962.4658203125, 561.9256591796875, 1015.632568359375, 616.2688598632812,
      4,
    ],
    [
      328.3125915527344, 565.2508544921875, 383.13067626953125,
      618.8112182617188, 4,
    ],
    [1016.2939453125, 566.2794799804688, 1069.74658203125, 620.600341796875, 4],
    [
      383.6474914550781, 569.0291137695312, 438.41094970703125,
      622.7579345703125, 4,
    ],
    [
      1070.2059326171875, 572.3089599609375, 1123.6075439453125,
      625.5848388671875, 4,
    ],
    [
      438.9607238769531, 572.8321533203125, 493.92022705078125, 626.35009765625,
      4,
    ],
    [
      494.69012451171875, 575.6347045898438, 549.4805908203125, 629.16943359375,
      4,
    ],
    [
      1124.3509521484375, 578.8748779296875, 1178.3258056640625,
      632.4829711914062, 4,
    ],
    [
      550.0189208984375, 578.8505859375, 604.5196533203125, 632.6204223632812,
      4,
    ],
    [
      605.0260620117188, 582.1732177734375, 659.2088012695312,
      635.8068237304688, 4,
    ],
    [
      659.6818237304688, 585.8497924804688, 714.17822265625, 639.7976684570312,
      4,
    ],
    [
      714.6359252929688, 589.8016967773438, 768.8021850585938,
      643.8018188476562, 4,
    ],
    [769.6349487304688, 593.9038696289062, 823.8638916015625, 648.298828125, 4],
    [
      76.75850677490234, 596.166259765625, 130.55703735351562,
      649.0570068359375, 4,
    ],
    [
      824.1390991210938, 597.6036376953125, 878.1773681640625,
      651.4983520507812, 4,
    ],
    [1174.434814453125, 600.3525390625, 1226.684814453125, 654.273193359375, 4],
    [
      131.75392150878906, 601.135986328125, 187.12277221679688,
      653.6153564453125, 4,
    ],
    [
      878.6319580078125, 601.8530883789062, 932.5676879882812, 655.327392578125,
      4,
    ],
    [
      187.589111328125, 603.8099365234375, 242.69496154785156,
      656.5525512695312, 4,
    ],
    [933.2022705078125, 606.6172485351562, 987.091796875, 659.796875, 4],
    [
      243.2230224609375, 606.6571044921875, 297.3529357910156,
      660.1287231445312, 4,
    ],
    [
      297.9295959472656, 609.4659423828125, 352.5151062011719, 663.459228515625,
      4,
    ],
    [
      987.4199829101562, 610.5533447265625, 1040.6773681640625,
      664.3059692382812, 4,
    ],
    [352.9222412109375, 612.981201171875, 407.9789733886719, 666.5810546875, 4],
    [
      1041.1109619140625, 615.3350219726562, 1093.9808349609375,
      669.5101928710938, 4,
    ],
    [
      408.4245910644531, 616.8655395507812, 463.72039794921875,
      669.796142578125, 4,
    ],
    [
      464.26116943359375, 619.942138671875, 519.2333984375, 673.7944946289062,
      4,
    ],
    [
      1094.7398681640625, 621.1533203125, 1148.9490966796875, 674.12451171875,
      4,
    ],
    [
      519.6995239257812, 623.2381591796875, 574.3739624023438,
      677.2269287109375, 4,
    ],
    [
      574.8158569335938, 626.7146606445312, 629.06396484375, 680.5448608398438,
      4,
    ],
    [
      629.6650390625, 630.4020385742188, 684.0199584960938, 683.8552856445312,
      4,
    ],
    [
      684.4691162109375, 634.3135986328125, 739.3233032226562,
      687.8977661132812, 4,
    ],
    [
      739.6176147460938, 638.665283203125, 794.1043701171875, 692.2601318359375,
      4,
    ],
    [
      51.346031188964844, 639.5562133789062, 101.30216217041016, 696.6279296875,
      4,
    ],
    [
      794.5777587890625, 641.9614868164062, 848.3010864257812,
      695.7830810546875, 4,
    ],
    [
      101.98855590820312, 643.654296875, 156.1643524169922, 697.1787719726562,
      4,
    ],
    [
      848.8069458007812, 645.8516235351562, 902.6685180664062,
      699.5404052734375, 4,
    ],
    [
      157.05923461914062, 647.7622680664062, 212.27392578125, 700.5101318359375,
      4,
    ],
    [
      903.32958984375, 650.3593139648438, 957.4109497070312, 704.0087280273438,
      4,
    ],
    [
      212.8656463623047, 650.7841186523438, 267.54241943359375,
      704.2615966796875, 4,
    ],
    [
      268.080322265625, 653.8529663085938, 322.6063537597656, 707.5300903320312,
      4,
    ],
    [
      1168.4222412109375, 652.8690185546875, 1217.376220703125,
      708.7027587890625, 4,
    ],
    [
      958.0573120117188, 654.7184448242188, 1011.9493408203125,
      708.239990234375, 4,
    ],
    [
      323.2052917480469, 657.06689453125, 377.73675537109375, 710.4662475585938,
      4,
    ],
    [
      1012.2173461914062, 659.0973510742188, 1065.505615234375,
      712.440673828125, 4,
    ],
    [
      378.15924072265625, 661.1783447265625, 433.4366149902344,
      714.6845092773438, 4,
    ],
    [
      433.86016845703125, 663.893310546875, 488.51239013671875,
      717.120361328125, 4,
    ],
    [
      1066.791259765625, 665.00146484375, 1120.7130126953125, 717.9227294921875,
      4,
    ],
    [489.0783386230469, 667.87841796875, 544.2734375, 720.8873901367188, 4],
    [1121.0982666015625, 668.7766723632812, 1172.894775390625, 723.26953125, 4],
    [
      544.6835327148438, 671.294189453125, 599.3600463867188, 724.5827026367188,
      4,
    ],
    [
      599.7769775390625, 674.8055419921875, 653.970458984375, 728.69580078125,
      4,
    ],
    [
      654.6392822265625, 678.3836059570312, 708.7244873046875,
      732.2706298828125, 4,
    ],
    [709.2835083007812, 682.703125, 763.7767944335938, 736.2669067382812, 4],
    [764.351318359375, 686.602294921875, 818.9208984375, 739.9896850585938, 4],
    [
      71.87818145751953, 689.402587890625, 127.58963775634766,
      741.5022583007812, 4,
    ],
    [
      819.4510498046875, 690.5595092773438, 873.6087646484375,
      744.2116088867188, 4,
    ],
    [
      128.15383911132812, 691.3473510742188, 182.1151123046875,
      745.2810668945312, 4,
    ],
    [
      874.06591796875, 694.101806640625, 927.8819580078125, 747.7830200195312,
      4,
    ],
    [
      182.83209228515625, 694.9646606445312, 237.32168579101562,
      747.8544311523438, 4,
    ],
    [
      237.85800170898438, 698.5162963867188, 292.67822265625, 751.5391235351562,
      4,
    ],
    [
      928.4820556640625, 698.7561645507812, 982.2655639648438,
      751.4654541015625, 4,
    ],
    [
      293.03973388671875, 701.7363891601562, 347.4864807128906,
      754.6741333007812, 4,
    ],
    [983.1025390625, 702.6774291992188, 1036.613525390625, 756.010498046875, 4],
    [
      348.1523132324219, 705.186767578125, 402.8390808105469, 758.6220092773438,
      4,
    ],
    [1037.0474853515625, 707.921142578125, 1090.421875, 760.638916015625, 4],
    [
      403.5739440917969, 708.6094970703125, 458.36590576171875,
      762.0903930664062, 4,
    ],
    [
      1157.5067138671875, 708.9366455078125, 1210.4654541015625,
      762.8753662109375, 4,
    ],
    [458.927734375, 711.7471313476562, 513.532958984375, 765.6162109375, 4],
    [
      1091.1490478515625, 712.2714233398438, 1145.375732421875,
      765.1844482421875, 4,
    ],
    [
      514.1361694335938, 715.5738525390625, 568.6679077148438,
      769.4307861328125, 4,
    ],
    [
      569.3582763671875, 719.4777221679688, 624.1315307617188,
      772.9681396484375, 4,
    ],
    [
      624.6279907226562, 723.3783569335938, 679.0097045898438,
      776.9812622070312, 4,
    ],
    [
      679.6295166015625, 726.8006591796875, 733.7703247070312,
      780.5990600585938, 4,
    ],
    [
      734.1622314453125, 730.671630859375, 788.6133422851562, 783.6878662109375,
      4,
    ],
    [
      46.20955276489258, 731.8579711914062, 97.14881134033203,
      787.8243408203125, 4,
    ],
    [789.1946411132812, 734.6780395507812, 843.322265625, 787.8236083984375, 4],
    [97.7744140625, 736.063232421875, 152.0749969482422, 789.4453735351562, 4],
    [
      843.9505615234375, 738.6369018554688, 898.2235717773438,
      791.7474975585938, 4,
    ],
    [
      152.54075622558594, 739.5057373046875, 206.68527221679688,
      792.940185546875, 4,
    ],
    [
      898.6390380859375, 742.3260498046875, 952.66845703125, 795.4305419921875,
      4,
    ],
    [
      207.4645233154297, 742.5499267578125, 261.79925537109375,
      796.0962524414062, 4,
    ],
    [
      262.26507568359375, 745.7906494140625, 317.23138427734375,
      799.3228149414062, 4,
    ],
    [953.30859375, 746.3531494140625, 1007.246337890625, 799.3363647460938, 4],
    [
      317.705322265625, 749.5368041992188, 372.53326416015625,
      802.6152954101562, 4,
    ],
    [
      1007.8645629882812, 750.9378051757812, 1061.6409912109375,
      803.5679321289062, 4,
    ],
    [1125.78515625, 752.16357421875, 1180.1954345703125, 805.3369140625, 4],
    [
      373.15380859375, 752.892822265625, 427.8087463378906, 805.9827270507812,
      4,
    ],
    [
      1062.1478271484375, 755.7459716796875, 1116.4620361328125,
      807.6383056640625, 4,
    ],
    [
      428.3193664550781, 756.5376586914062, 483.22418212890625, 809.24658203125,
      4,
    ],
    [
      483.71258544921875, 759.715087890625, 538.2353515625, 812.9141845703125,
      4,
    ],
    [
      538.8435668945312, 763.7130737304688, 593.2896728515625,
      816.5537719726562, 4,
    ],
    [
      594.0501708984375, 767.2605590820312, 648.6536254882812,
      820.5875854492188, 4,
    ],
    [
      649.175537109375, 771.1348266601562, 703.843994140625, 824.1544799804688,
      4,
    ],
    [
      704.5313110351562, 774.7807006835938, 758.896240234375, 828.104248046875,
      4,
    ],
    [
      759.4857788085938, 778.2506103515625, 813.5343627929688, 831.688232421875,
      4,
    ],
    [
      68.0235824584961, 780.8867797851562, 123.56411743164062,
      832.8070678710938, 4,
    ],
    [814.059814453125, 782.4391479492188, 868.20947265625, 835.38720703125, 4],
    [
      123.99385070800781, 783.485595703125, 177.4622039794922,
      837.4491577148438, 4,
    ],
    [868.932373046875, 786.004150390625, 922.9697265625, 838.7510375976562, 4],
    [
      177.99618530273438, 787.2378540039062, 232.28831481933594,
      840.3112182617188, 4,
    ],
    [
      923.4450073242188, 789.6927490234375, 977.3048706054688,
      842.1802368164062, 4,
    ],
    [233.002685546875, 790.0337524414062, 287.222900390625, 843.09619140625, 4],
    [
      287.7790222167969, 793.0211181640625, 342.4784240722656,
      846.0856323242188, 4,
    ],
    [
      977.8285522460938, 793.5720825195312, 1031.5125732421875,
      846.1378173828125, 4,
    ],
    [
      1094.644775390625, 796.30908203125, 1148.560302734375, 849.0059204101562,
      4,
    ],
    [
      342.9120178222656, 796.8973999023438, 397.57769775390625,
      849.5770263671875, 4,
    ],
    [
      1032.036376953125, 798.0774536132812, 1086.8983154296875,
      849.8348388671875, 4,
    ],
    [
      398.1509094238281, 799.892578125, 452.48663330078125, 853.6349487304688,
      4,
    ],
    [
      1149.08935546875, 799.8297729492188, 1199.5565185546875,
      854.5723876953125, 4,
    ],
    [
      453.0587463378906, 803.6433715820312, 507.6442565917969,
      856.8128051757812, 4,
    ],
    [
      508.1871032714844, 807.3599243164062, 563.0010986328125,
      860.1602783203125, 4,
    ],
    [
      563.6716918945312, 810.7468872070312, 618.5438232421875,
      863.7374877929688, 4,
    ],
    [
      619.1129150390625, 814.7747192382812, 673.9779663085938,
      867.4313354492188, 4,
    ],
    [674.4531860351562, 818.6369018554688, 728.8583984375, 871.547607421875, 4],
    [
      729.5132446289062, 821.8748168945312, 783.5866088867188, 874.936767578125,
      4,
    ],
    [44.04143524169922, 822.1393432617188, 94.05340576171875, 878.400390625, 4],
    [
      784.2871704101562, 825.8887939453125, 838.6097412109375,
      878.6603393554688, 4,
    ],
    [
      94.63404083251953, 827.7014770507812, 147.90933227539062,
      880.756103515625, 4,
    ],
    [839.0426025390625, 829.3023071289062, 892.859375, 882.27587890625, 4],
    [
      148.19210815429688, 832.18115234375, 202.7671356201172, 885.3966674804688,
      4,
    ],
    [893.4548950195312, 832.869140625, 947.1951293945312, 885.8472290039062, 4],
    [
      203.62521362304688, 833.7691040039062, 257.89215087890625, 887.150390625,
      4,
    ],
    [
      947.7905883789062, 836.720947265625, 1001.687255859375, 889.3541259765625,
      4,
    ],
    [
      258.5191650390625, 837.2009887695312, 312.6260070800781, 890.13623046875,
      4,
    ],
    [
      1062.8377685546875, 839.6657104492188, 1116.26904296875,
      892.6500244140625, 4,
    ],
    [
      1002.5068359375, 840.7584228515625, 1056.924072265625, 892.7423706054688,
      4,
    ],
    [
      313.4140319824219, 840.3455810546875, 367.8837585449219,
      893.4757080078125, 4,
    ],
    [
      1116.92919921875, 843.8124389648438, 1170.5906982421875,
      896.3499145507812, 4,
    ],
    [
      368.470947265625, 843.5767211914062, 422.77386474609375, 896.70361328125,
      4,
    ],
    [
      423.4573669433594, 847.546142578125, 477.8348693847656, 900.05517578125,
      4,
    ],
    [478.6444396972656, 850.6616821289062, 533.3154296875, 903.535888671875, 4],
    [
      533.8378295898438, 854.0877685546875, 588.2379760742188, 907.052490234375,
      4,
    ],
    [
      588.8501586914062, 858.0140380859375, 643.4351196289062, 910.916748046875,
      4,
    ],
    [
      643.9691162109375, 861.7679443359375, 698.6913452148438,
      914.3781127929688, 4,
    ],
    [
      699.1393432617188, 865.6805419921875, 753.7199096679688,
      918.0288696289062, 4,
    ],
    [
      754.38818359375, 869.3041381835938, 808.5159912109375, 922.0115356445312,
      4,
    ],
    [
      63.762107849121094, 872.38818359375, 119.54625701904297, 923.9443359375,
      4,
    ],
    [
      809.0370483398438, 872.8538208007812, 863.1742553710938,
      925.5379638671875, 4,
    ],
    [
      119.9578857421875, 875.3029174804688, 173.91818237304688,
      928.0752563476562, 4,
    ],
    [
      863.7633056640625, 876.4039916992188, 917.3369140625, 929.0346069335938,
      4,
    ],
    [
      174.63600158691406, 877.9367065429688, 228.64772033691406,
      930.9325561523438, 4,
    ],
    [917.9326171875, 879.9484252929688, 971.956787109375, 932.3212280273438, 4],
    [229.18081665039062, 881.402099609375, 283.64453125, 934.001708984375, 4],
    [
      972.4403686523438, 883.4359130859375, 1026.9283447265625,
      935.468505859375, 4,
    ],
    [
      1031.0684814453125, 883.7122192382812, 1084.884033203125,
      936.0728759765625, 4,
    ],
    [284.2129211425781, 884.4913940429688, 338.31658935546875, 937.5703125, 4],
    [
      1085.5643310546875, 887.3656616210938, 1138.4508056640625,
      940.2455444335938, 4,
    ],
    [338.864501953125, 887.5321044921875, 393.3399658203125, 940.525390625, 4],
    [
      393.8772277832031, 891.0114135742188, 448.2276611328125, 943.75927734375,
      4,
    ],
    [
      1138.6724853515625, 890.6791381835938, 1188.8060302734375,
      945.8434448242188, 4,
    ],
    [
      448.83502197265625, 894.2874755859375, 503.3773193359375,
      946.9095458984375, 4,
    ],
    [
      504.1065368652344, 897.7106323242188, 558.83837890625, 950.2955322265625,
      4,
    ],
    [
      559.2120361328125, 901.2998046875, 613.6622924804688, 953.8648071289062,
      4,
    ],
    [
      614.1304931640625, 905.0300903320312, 668.3217163085938,
      957.4996337890625, 4,
    ],
    [
      669.0828247070312, 908.7756958007812, 723.3958129882812,
      961.2015380859375, 4,
    ],
    [
      723.95654296875, 912.5339965820312, 778.4578247070312, 964.435302734375,
      4,
    ],
    [
      779.1468505859375, 916.319580078125, 833.153564453125, 968.6758422851562,
      4,
    ],
    [
      38.830020904541016, 914.8079223632812, 90.44686889648438,
      970.4364013671875, 4,
    ],
    [
      91.43877410888672, 918.7152709960938, 145.0567169189453, 971.6201171875,
      4,
    ],
    [
      833.7059326171875, 920.1785278320312, 887.8654174804688,
      972.4798583984375, 4,
    ],
    [
      145.566650390625, 921.6848754882812, 199.44740295410156,
      974.4064331054688, 4,
    ],
    [
      888.4425659179688, 923.0693969726562, 941.8301391601562,
      975.6253051757812, 4,
    ],
    [
      200.03599548339844, 924.9382934570312, 254.1385498046875,
      977.9742431640625, 4,
    ],
    [
      942.8985595703125, 926.9456787109375, 997.3191528320312, 979.337646484375,
      4,
    ],
    [
      999.594482421875, 927.1019897460938, 1053.6702880859375, 979.86572265625,
      4,
    ],
    [
      254.73648071289062, 928.0020141601562, 308.6886291503906, 980.9169921875,
      4,
    ],
    [
      309.379638671875, 931.1802978515625, 363.5596923828125, 983.6295776367188,
      4,
    ],
    [
      1054.3489990234375, 931.279541015625, 1106.7193603515625,
      984.4835205078125, 4,
    ],
    [
      364.2034606933594, 934.5009155273438, 418.6443786621094,
      987.0587768554688, 4,
    ],
    [
      1107.0421142578125, 934.80908203125, 1160.249755859375, 987.2406005859375,
      4,
    ],
    [
      419.0440673828125, 937.9749755859375, 473.6971435546875,
      989.9412231445312, 4,
    ],
    [
      474.2030334472656, 940.6963500976562, 528.1065673828125,
      993.1868286132812, 4,
    ],
    [
      528.8528442382812, 944.514892578125, 583.3541259765625, 996.7154541015625,
      4,
    ],
    [
      583.9251098632812, 947.9678344726562, 638.1383666992188,
      1000.0829467773438, 4,
    ],
    [
      638.7103881835938, 951.65185546875, 693.046142578125, 1003.8716430664062,
      4,
    ],
    [
      693.5667114257812, 955.0289916992188, 747.7910766601562,
      1007.241943359375, 4,
    ],
    [
      748.2284545898438, 958.5762329101562, 802.2755737304688,
      1010.998291015625, 4,
    ],
    [
      802.981689453125, 962.8995361328125, 857.2413940429688,
      1014.5061645507812, 4,
    ],
    [
      61.673927307128906, 963.17529296875, 116.43097686767578,
      1014.3529052734375, 4,
    ],
    [
      857.618408203125, 966.1997680664062, 911.6018676757812,
      1017.8658447265625, 4,
    ],
    [
      116.81996154785156, 966.407470703125, 170.5986785888672, 1019.6103515625,
      4,
    ],
    [
      171.2255096435547, 968.7876586914062, 224.8278350830078,
      1021.3115844726562, 4,
    ],
    [
      912.1387329101562, 969.5946655273438, 966.2307739257812,
      1020.9947509765625, 4,
    ],
    [
      968.633544921875, 971.22998046875, 1022.13720703125, 1023.5916748046875,
      4,
    ],
    [
      225.4300079345703, 972.1236572265625, 279.506591796875,
      1024.4349365234375, 4,
    ],
    [1022.4378662109375, 973.9365234375, 1075.0252685546875, 1026.869140625, 4],
    [
      279.99090576171875, 975.1563110351562, 334.05126953125, 1027.662353515625,
      4,
    ],
    [
      1075.6285400390625, 978.3731079101562, 1128.791259765625,
      1030.8809814453125, 4,
    ],
    [
      334.47723388671875, 979.1961059570312, 388.5307922363281,
      1031.669189453125, 4,
    ],
    [
      389.3734436035156, 981.2835693359375, 443.2019958496094, 1033.59423828125,
      4,
    ],
    [
      1129.4427490234375, 982.7451171875, 1180.7069091796875,
      1037.5316162109375, 4,
    ],
    [
      443.64483642578125, 984.5960083007812, 498.26153564453125,
      1037.0069580078125, 4,
    ],
    [
      498.9227294921875, 988.103759765625, 552.8953247070312, 1040.07958984375,
      4,
    ],
    [
      553.58544921875, 991.1398315429688, 607.5438842773438, 1043.5152587890625,
      4,
    ],
    [
      608.0382080078125, 994.7064819335938, 662.5679321289062,
      1046.5184326171875, 4,
    ],
    [663.1842041015625, 998.44140625, 717.3615112304688, 1049.9420166015625, 4],
    [717.8607788085938, 1001.6212768554688, 772.021484375, 1053.71484375, 4],
    [
      772.5003051757812, 1005.8229370117188, 826.6327514648438, 1057.388671875,
      4,
    ],
    [36.6856803894043, 1005.986328125, 86.9089126586914, 1061.6236572265625, 4],
    [
      827.3274536132812, 1008.9638061523438, 881.3703002929688, 1060.8232421875,
      4,
    ],
    [87.9997787475586, 1009.145263671875, 141.41287231445312, 1061.328125, 4],
    [
      881.9146728515625, 1012.5975341796875, 935.9559936523438,
      1064.263916015625, 4,
    ],
    [
      141.99642944335938, 1013.1506958007812, 195.63465881347656, 1065.54296875,
      4,
    ],
    [937.2838134765625, 1014.8330688476562, 990.5166015625, 1067.5146484375, 4],
    [
      196.39439392089844, 1015.6118774414062, 250.1834716796875,
      1067.9930419921875, 4,
    ],
    [
      250.80006408691406, 1018.4763793945312, 304.5611877441406,
      1070.518310546875, 4,
    ],
    [
      991.4900512695312, 1018.7840576171875, 1044.4912109375, 1071.546630859375,
      4,
    ],
    [
      305.2610778808594, 1021.7957763671875, 358.9390869140625,
      1073.6217041015625, 4,
    ],
    [
      1045.1334228515625, 1022.236572265625, 1097.2642822265625,
      1075.1064453125, 4,
    ],
    [
      359.486572265625, 1024.6531982421875, 413.43115234375, 1076.7926025390625,
      4,
    ],
    [
      1097.4263916015625, 1026.1654052734375, 1150.27490234375,
      1078.286865234375, 4,
    ],
    [
      414.1869812011719, 1027.813720703125, 468.0015563964844, 1079.83251953125,
      4,
    ],
    [468.5561218261719, 1031.0283203125, 522.677001953125, 1082.6884765625, 4],
    [
      523.1889038085938, 1034.7684326171875, 577.5277099609375,
      1086.101806640625, 4,
    ],
    [
      578.0238647460938, 1038.0482177734375, 632.1410522460938,
      1089.5032958984375, 4,
    ],
    [
      632.677734375, 1041.0650634765625, 686.4960327148438, 1092.9754638671875,
      4,
    ],
    [
      687.1969604492188, 1044.6929931640625, 741.218017578125,
      1096.477294921875, 4,
    ],
    [
      741.6517944335938, 1048.0115966796875, 795.6818237304688,
      1099.6429443359375, 4,
    ],
    [
      796.1216430664062, 1051.8765869140625, 850.2390747070312, 1103.1982421875,
      4,
    ],
    [
      58.757354736328125, 1052.74951171875, 113.68251037597656,
      1103.894775390625, 4,
    ],
    [
      850.7948608398438, 1055.3931884765625, 904.9996948242188,
      1106.2178955078125, 4,
    ],
    [
      114.28487396240234, 1055.5211181640625, 166.78823852539062,
      1108.0623779296875, 4,
    ],
    [
      905.556640625, 1058.3140869140625, 959.3784790039062, 1109.802978515625,
      4,
    ],
    [
      167.37767028808594, 1058.9068603515625, 220.88087463378906,
      1110.8973388671875, 4,
    ],
    [960.0214233398438, 1061.4674072265625, 1012.484375, 1113.5225830078125, 4],
    [
      221.47010803222656, 1061.99169921875, 275.27520751953125,
      1113.688232421875, 4,
    ],
    [
      1012.8230590820312, 1064.703857421875, 1064.8514404296875,
      1116.1075439453125, 4,
    ],
    [
      275.9016418457031, 1065.02685546875, 329.46832275390625, 1116.62646484375,
      4,
    ],
    [
      330.21063232421875, 1067.6787109375, 384.1235656738281,
      1119.5335693359375, 4,
    ],
    [
      1065.335205078125, 1068.0474853515625, 1117.642333984375,
      1120.299560546875, 4,
    ],
    [
      384.822509765625, 1071.0906982421875, 438.3417053222656, 1123.173828125,
      4,
    ],
    [
      1118.0068359375, 1071.6292724609375, 1167.6966552734375,
      1124.0406494140625, 4,
    ],
    [
      439.0655212402344, 1074.1331787109375, 492.8477783203125,
      1126.19189453125, 4,
    ],
    [
      493.30511474609375, 1077.373291015625, 547.1542358398438, 1129.3818359375,
      4,
    ],
    [547.7063598632812, 1080.5859375, 601.5867919921875, 1132.46533203125, 4],
    [
      602.2019653320312, 1083.834228515625, 656.2793579101562,
      1135.653076171875, 4,
    ],
    [
      656.8282470703125, 1087.4129638671875, 710.5473022460938,
      1138.6614990234375, 4,
    ],
    [
      711.21923828125, 1090.904541015625, 765.043212890625, 1142.5213623046875,
      4,
    ],
    [
      765.5904541015625, 1093.9962158203125, 819.428466796875, 1145.47021484375,
      4,
    ],
    [
      35.73750305175781, 1093.3646240234375, 83.86055755615234,
      1148.560302734375, 4,
    ],
    [
      819.919189453125, 1097.40966796875, 873.8321533203125, 1148.50927734375,
      4,
    ],
    [
      84.21527099609375, 1099.6103515625, 137.359130859375, 1152.2044677734375,
      4,
    ],
    [874.1888427734375, 1100.626953125, 927.7335205078125, 1151.77978515625, 4],
    [
      137.9149627685547, 1102.5833740234375, 191.94703674316406,
      1153.70458984375, 4,
    ],
    [
      928.1365966796875, 1104.1103515625, 980.9945678710938, 1155.732177734375,
      4,
    ],
    [
      192.65565490722656, 1104.95849609375, 246.23594665527344,
      1156.7457275390625, 4,
    ],
    [
      981.5130004882812, 1107.809814453125, 1033.8521728515625,
      1159.970947265625, 4,
    ],
    [
      246.91065979003906, 1107.856201171875, 300.41583251953125,
      1160.0108642578125, 4,
    ],
    [
      1034.1927490234375, 1110.7530517578125, 1085.9046630859375,
      1162.2742919921875, 4,
    ],
    [
      300.8256530761719, 1110.8792724609375, 354.3119812011719,
      1162.8760986328125, 4,
    ],
    [
      355.0445861816406, 1113.7720947265625, 408.690673828125,
      1165.414306640625, 4,
    ],
    [
      1086.3828125, 1114.9127197265625, 1140.0379638671875, 1165.9991455078125,
      4,
    ],
    [
      409.2218017578125, 1117.310302734375, 463.11663818359375,
      1168.5616455078125, 4,
    ],
    [
      463.755615234375, 1120.7513427734375, 517.4928588867188, 1172.13623046875,
      4,
    ],
    [
      518.0164184570312, 1123.5218505859375, 571.489013671875,
      1175.1951904296875, 4,
    ],
    [
      572.183837890625, 1126.69189453125, 625.7843627929688, 1178.1866455078125,
      4,
    ],
    [
      626.22265625, 1129.9429931640625, 679.4530639648438, 1181.7843017578125,
      4,
    ],
    [
      679.85986328125, 1133.085693359375, 734.2067260742188, 1184.3082275390625,
      4,
    ],
    [
      734.6158447265625, 1136.8626708984375, 788.7841186523438,
      1187.6197509765625, 4,
    ],
    [
      789.34423828125, 1139.8748779296875, 842.642822265625, 1190.8582763671875,
      4,
    ],
    [
      843.4356079101562, 1143.1474609375, 896.6429443359375, 1194.506103515625,
      4,
    ],
    [
      52.17620086669922, 1144.050537109375, 107.63634490966797,
      1193.93896484375, 4,
    ],
    [
      108.3281021118164, 1145.348388671875, 162.21926879882812, 1196.0751953125,
      4,
    ],
    [
      897.13037109375, 1146.5743408203125, 949.7025756835938, 1197.722900390625,
      4,
    ],
    [
      162.9167938232422, 1147.7723388671875, 216.85833740234375,
      1198.6593017578125, 4,
    ],
    [950.226806640625, 1150.73095703125, 1003.1988525390625, 1201.7109375, 4],
    [
      217.57058715820312, 1151.5234375, 271.2673034667969, 1202.2613525390625,
      4,
    ],
    [
      1003.8283081054688, 1153.7301025390625, 1055.6846923828125,
      1204.8333740234375, 4,
    ],
    [
      271.8092041015625, 1155.254150390625, 325.4427185058594, 1206.51025390625,
      4,
    ],
    [
      326.0885925292969, 1156.8070068359375, 379.39276123046875,
      1208.5484619140625, 4,
    ],
    [
      1056.0518798828125, 1156.930419921875, 1107.3892822265625,
      1208.9052734375, 4,
    ],
    [
      380.0042419433594, 1160.18115234375, 433.4224853515625, 1211.826904296875,
      4,
    ],
    [
      1107.8564453125, 1159.8275146484375, 1157.656494140625, 1212.768310546875,
      4,
    ],
    [
      433.8949890136719, 1163.3028564453125, 487.2239990234375,
      1214.7215576171875, 4,
    ],
    [
      487.92742919921875, 1166.220947265625, 541.8125610351562, 1217.69140625,
      4,
    ],
    [
      542.242919921875, 1169.631103515625, 595.8531494140625,
      1220.5841064453125, 4,
    ],
    [
      596.3701782226562, 1172.5445556640625, 649.3594360351562,
      1224.7388916015625, 4,
    ],
    [
      649.8115234375, 1175.9388427734375, 702.7239990234375, 1227.808349609375,
      4,
    ],
    [
      703.3048095703125, 1178.5740966796875, 756.8634033203125,
      1229.657470703125, 4,
    ],
    [
      757.4353637695312, 1182.074951171875, 811.707763671875, 1232.23095703125,
      4,
    ],
    [
      24.480117797851562, 1183.3245849609375, 77.36370849609375,
      1232.587158203125, 4,
    ],
    [
      812.167724609375, 1185.3836669921875, 865.5111694335938, 1236.09716796875,
      4,
    ],
    [
      77.89710235595703, 1187.50048828125, 132.914794921875, 1236.3436279296875,
      4,
    ],
    [
      133.64895629882812, 1190.0892333984375, 187.966552734375,
      1239.086181640625, 4,
    ],
    [
      866.0650024414062, 1189.364501953125, 918.6792602539062, 1240.310546875,
      4,
    ],
    [
      919.0311889648438, 1192.8199462890625, 971.5860595703125,
      1244.0382080078125, 4,
    ],
    [
      188.5225372314453, 1193.2403564453125, 242.3297882080078,
      1243.653076171875, 4,
    ],
    [
      242.98358154296875, 1196.3857421875, 296.28167724609375, 1246.23876953125,
      4,
    ],
    [
      972.1318969726562, 1196.187255859375, 1024.3465576171875,
      1247.041748046875, 4,
    ],
    [
      296.97088623046875, 1199.4146728515625, 350.6341857910156,
      1250.3914794921875, 4,
    ],
    [
      1024.79248046875, 1199.7373046875, 1077.0970458984375, 1250.888916015625,
      4,
    ],
    [
      350.9502258300781, 1202.53173828125, 403.7527160644531,
      1253.6614990234375, 4,
    ],
    [
      1077.365478515625, 1203.7965087890625, 1130.7188720703125,
      1254.24072265625, 4,
    ],
    [
      404.3244323730469, 1206.2781982421875, 458.126220703125,
      1255.656982421875, 4,
    ],
    [
      458.6783142089844, 1208.5826416015625, 511.4703063964844,
      1258.3021240234375, 4,
    ],
    [512.1201782226562, 1211.623046875, 565.4815063476562, 1261.3583984375, 4],
    [
      565.9102783203125, 1215.2637939453125, 619.6220092773438,
      1264.885498046875, 4,
    ],
    [
      619.86474609375, 1219.2586669921875, 672.271240234375, 1270.4803466796875,
      4,
    ],
    [
      672.7781982421875, 1221.39111328125, 725.7883911132812, 1270.635009765625,
      4,
    ],
    [
      726.5736694335938, 1223.3330078125, 779.7767944335938, 1272.928955078125,
      4,
    ],
    [
      780.3128051757812, 1226.90478515625, 833.551513671875, 1276.527587890625,
      4,
    ],
    [
      833.8779907226562, 1230.848876953125, 886.6293334960938,
      1280.0655517578125, 4,
    ],
    [
      887.2177124023438, 1234.9432373046875, 939.9515991210938,
      1284.2186279296875, 4,
    ],
    [939.853515625, 1238.5986328125, 992.4586791992188, 1287.8160400390625, 4],
    [
      993.0379638671875, 1242.3148193359375, 1045.9464111328125,
      1288.3765869140625, 5,
    ],
    [
      1046.0277099609375, 1245.23876953125, 1099.507080078125,
      1293.0438232421875, 5,
    ],
    [
      1100.4478759765625, 1248.0621337890625, 1154.445556640625,
      1296.6060791015625, 5,
    ],
  ]);

  // const [uniqueImageUrl, setUniqueImageUrl] = useState("");
  // const [resize, setResize]= useState(false)

  const [count, setCount] = useState(0); // Set initial count based on existing boxes
  const [typeCount, setTypeCount] = useState({ 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 });
  const [initialCounts, setInitialCounts]= useState({ 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 })
  const [pipeColor, setPipeColor] = useState(1);
  const [imgSize, setImgSize] = useState(0.9);
  const imageRef = useRef(null);
  const [loading, setLoading]= useState(false)
  // const canvasRef = useRef(null);
  const [imageSize, setImageSize] = useState({ width: 0, height: 0 });

  useEffect(() => {
    const updateImageSize = () => {
      if (imageRef.current) {
        setImageSize({
          width: imageRef.current.clientWidth,
          height: imageRef.current.clientHeight,
        });
      }
    };

    updateImageSize(); // Update initially
    window.addEventListener("resize", updateImageSize); // Update on resize

    return () => window.removeEventListener("resize", updateImageSize);
  }, []);

  const handleImageClick = (e) => {
    if (!imageRef.current) return;

    const imageRect = imageRef.current.getBoundingClientRect();
    const x = e.clientX - imageRect.left;
    const y = e.clientY - imageRect.top;
    const originalWidth = 1271;
    const originalHeight = 1324;
    const scaleX = originalWidth / imageSize.width;
    const scaleY = originalHeight / imageSize.height;

    const boxSize = 50;
    const adjustedX = Math.round(x * scaleX - boxSize / 2);
    const adjustedY = Math.round(y * scaleY - boxSize / 2);

    setBoxes((prevBoxes) => {
      const newBoxes = [
        ...prevBoxes,
        [
          adjustedX,
          adjustedY,
          adjustedX + boxSize,
          adjustedY + boxSize,
          pipeColor,
        ],
      ];

      // Update count for the selected pipeColor
      // setTypeCount((prevTypeCount) => ({
      //   ...prevTypeCount,
      //   [pipeColor]: (prevTypeCount[pipeColor] || 0) + 1,
      // }));

      return newBoxes;
    });

    // Update total count correctly
    setCount((prevCount) => prevCount + pipeColor);
  };

  // -------Download the image after button click----------

  //   const downloadImage = () => {
  //   const element = document.getElementById("captureArea");
  //   const captureButton = document.getElementById("captureButton");
  //   const pipeSizeButton = document.getElementById("pipeSizeButton");

  //   // Hide buttons before capturing
  //   if (captureButton) captureButton.style.display = "none";
  //   if (pipeSizeButton) pipeSizeButton.style.display = "none";

  //   domtoimage.toPng(element, {useCORS: true, quality: 1, bgcolor: "white" })
  //     .then((dataUrl) => {
  //       const link = document.createElement("a");
  //       link.href = dataUrl;
  //       link.download = "downloaded-image.png";
  //       link.click();
  //     })
  //     .catch((error) => console.error("Error generating image:", error))
  //     .finally(() => {
  //       // Ensure buttons are restored
  //       if (captureButton) captureButton.style.display = "flex";
  //       if (pipeSizeButton) pipeSizeButton.style.display = "flex";
  //     });
  // };

  // const downloadImage = () => {
  //   const element = document.getElementById("captureArea");
  //   const captureButton = document.getElementById("captureButton");
  //   const pipeSizeButton = document.getElementById("pipeSizeButton");

  //   // Hide buttons before capturing
  //   if (captureButton) captureButton.style.display = "none";
  //   if (pipeSizeButton) pipeSizeButton.style.display = "none";

  //   html2canvas(element, { useCORS: true, backgroundColor: "white", scale: 2 })
  //     .then((canvas) => {
  //       const dataUrl = canvas.toDataURL("image/png");
  //       const link = document.createElement("a");
  //       link.href = dataUrl;
  //       link.download = "downloaded-image.png";
  //       link.click();
  //     })
  //     .catch((error) => console.error("Error generating image:", error))
  //     .finally(() => {
  //       // Restore button visibility
  //       if (captureButton) captureButton.style.display = "flex";
  //       if (pipeSizeButton) pipeSizeButton.style.display = "flex";
  //     });
  // };

  // const downloadImage = () => {
  //   const element = document.getElementById("captureArea");
  //   const captureButton = document.getElementById("captureButton");
  //   const pipeSizeButton = document.getElementById("pipeSizeButton");

  //   // Hide buttons before capturing
  //   if (captureButton) captureButton.style.display = "none";
  //   if (pipeSizeButton) pipeSizeButton.style.display = "none";

  //   html2canvas(element, {logging: true,  useCORS: true, backgroundColor: "white", scale: 2 })
  //     .then((canvas) => {
  //       const dataUrl = canvas.toDataURL("image/png");

  //       // Open the image in a new tab instead of auto-downloading
  //       const newTab = window.open();
  //       newTab.document.write('<img src="' + dataUrl + '" />');

  //       // If you still want the download, keep this part
  //       const link = document.createElement("a");
  //       link.href = dataUrl;
  //       link.download = "downloaded-image.png";
  //       link.click();
  //     })
  //     .catch((error) => console.error("Error generating image:", error))
  //     .finally(() => {
  //       // Restore button visibility
  //       if (captureButton) captureButton.style.display = "flex";
  //       if (pipeSizeButton) pipeSizeButton.style.display = "flex";
  //     });
  // };

  // --------download in pdf-----------
  // const downloadImage = () => {
  //   const element = document.getElementById("captureArea");
  //   const captureButton = document.getElementById("captureButton");
  //   const pipeSizeButton = document.getElementById("pipeSizeButton");

  //   // Hide buttons before capturing
  //   if (captureButton) captureButton.style.display = "none";
  //   if (pipeSizeButton) pipeSizeButton.style.display = "none";

  //   html2canvas(element, { useCORS: true, backgroundColor: "white", scale: 2 })
  //     .then((canvas) => {
  //       // Create a new jsPDF instance
  //       const pdf = new jsPDF();

  //       // Add the captured image (canvas) to the PDF
  //       const imgData = canvas.toDataURL("image/png");
  //       pdf.addImage(imgData, "JPEG", 10, 10, 180, 160); // Adjust positioning and size as needed

  //       // Save the PDF
  //       pdf.save("downloaded-file.pdf");
  //     })
  //     .catch((error) => console.error("Error generating PDF:", error))
  //     .finally(() => {
  //       // Restore button visibility
  //       if (captureButton) captureButton.style.display = "flex";
  //       if (pipeSizeButton) pipeSizeButton.style.display = "flex";
  //     });
  // };

  // --------------------------------------------------
  // ------------blob-------------- working fine locally-------
  // const downloadImage = () => {
  //   const element = document.getElementById("captureArea");
  //   const captureButton = document.getElementById("captureButton");
  //   const pipeSizeButton = document.getElementById("pipeSizeButton");

  //   // Hide buttons before capturing
  //   if (captureButton) captureButton.style.display = "none";
  //   if (pipeSizeButton) pipeSizeButton.style.display = "none";

  //   html2canvas(element, { useCORS: true, backgroundColor: "white", scale: 2 })
  //     .then((canvas) => {
  //       canvas.toBlob((blob) => {
  //         if (blob) {
  //           const url = URL.createObjectURL(blob);
  //           const link = document.createElement("a");
  //           link.href = url;
  //           link.download = "downloaded-image.png";
  //           document.body.appendChild(link);
  //           link.click();
  //           document.body.removeChild(link);
  //           URL.revokeObjectURL(url); // Clean up memory
  //         }
  //       }, "image/png");
  //     })
  //     .catch((error) => console.error("Error generating image:", error))
  //     .finally(() => {
  //       // Restore button visibility
  //       if (captureButton) captureButton.style.display = "flex";
  //       if (pipeSizeButton) pipeSizeButton.style.display = "flex";
  //     });
  // };
  // --------------------------------------------------------

  // // Direct download approach using the original URL
  // const downloadImage = () => {
  //   try {
  //     // Extract filename from URL
  //     let imageUrl= "https://alvision-count.s3.ap-south-1.amazonaws.com/count/DrawTest/original/2025/03/original_9a470183-4736-456e-a0ba-436a11dc8825.png";
  //     const urlParts = imageUrl.split('/');
  //     const filename = urlParts[urlParts.length - 1] || 'image.png';

  //     // Create an anchor element and trigger download
  //     const link = document.createElement('a');
  //     link.href = imageUrl;
  //     link.download = filename;
  //     link.rel = "noopener noreferrer";
  //     document.body.appendChild(link);
  //     link.click();
  //     document.body.removeChild(link);

  //   } catch (err) {
  //     console.error("Error initiating download:", err);
  //     // setError("Download failed. Try right-click and 'Save Image As' instead.");
  //   }
  // };

  const waitForImagesToLoad = () => {
    return new Promise((resolve) => {
      const images = document.querySelectorAll("img");
      let loadedCount = 0;
      images.forEach((img) => {
        if (img.complete) {
          loadedCount++;
        } else {
          img.onload = img.onerror = () => {
            loadedCount++;
            if (loadedCount === images.length) resolve();
          };
        }
      });
      if (loadedCount === images.length) resolve();
    });
  };

  const downloadImage = async () => {
    setLoading(true)
    await waitForImagesToLoad(); // Ensure all images are loaded

    const element = document.getElementById("captureArea"); // Capture entire page
    const captureButton = document.getElementById("captureButton"); // Capture button reference
    const pipeSizeButton = document.getElementById("pipeSizeButton");

    // Hide the button before capturing
    captureButton.style.display = "none";
    pipeSizeButton.style.display = "none";

    // Ensure CORS compliance for external images
    document.querySelectorAll("img").forEach((img) => {
      if (!img.src.includes(window.location.origin)) {
        img.crossOrigin = "anonymous";
      }
    });

    // Capture screenshot
    const canvas = await html2canvas(element, {
      useCORS: true,
      allowTaint: true,
      scale: imgSize,
    });

    const imgData = canvas.toDataURL("image/png");

    // Restore the button after capturing
    captureButton.style.display = "flex";
    pipeSizeButton.style.display = "flex";

    // Create a download link
    const link = document.createElement("a");
    link.href = imgData;
    link.download = "screenshot.png";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    setLoading(false)
  };

  useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth < 1200) {
        setImgSize(2.5);
      } else {
        setImgSize(1.5);
      }
    };

    handleResize(); // Check size initially
    window.addEventListener("resize", handleResize); // Listen for resize events

    return () => window.removeEventListener("resize", handleResize);
  }, []);

  useEffect(() => {
    let obj = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };

    boxes.forEach((elem) => {
      let pipeCount = elem[4]; // Extract pipeCount

      if (obj[pipeCount] !== undefined) {
        obj[pipeCount] += 1; // Increment count for this pipe type
      }
    });

    setTypeCount(obj);
  }, [boxes]); // Runs whenever `boxes` changes

  

  // useEffect(() => {
  //   let obj = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };
  //   let totalPipes=0;

  //   boxes.forEach((elem) => {
  //     let pipeCount = elem[4]; // Extract pipeCount

  //     if (obj[pipeCount] !== undefined) {
  //       obj[pipeCount] += 1; // Increment count for this pipe type
  //       totalPipes+= +obj[pipeCount]
  //     }
  //   });
  //   console.log(totalPipes)

  //   setInitialCounts(obj);
  // }, []); // Runs whenever `boxes` changes

  useEffect(() => {
    let obj = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };
    let totalPipes = 0;

    boxes.forEach((elem) => {
      let pipeCount = elem[4]; // Extract pipeCount

      if (obj[pipeCount] !== undefined) {
        obj[pipeCount] += 1; // Increment count for this pipe type
      }
    });

    // // Calculate total pipes correctly
    totalPipes = Object.entries(obj).reduce((sum, [type, count]) => {
      return sum + Number(type) * count; // Multiply type (pipe nesting level) with its count
    }, 0);

    setCount(totalPipes);
    setInitialCounts(obj);
  }, []);
  // console.log(typeCount)
  let cumulativeSum = 0;

  //   const [imageLoaded, setImageLoaded] = useState(false);

  // useEffect(() => {
  //   const imgElement = document.getElementById("imageToCapture");
  //   if (imgElement) {
  //     if (imgElement.complete) {
  //       setImageLoaded(true);
  //     } else {
  //       imgElement.onload = () => setImageLoaded(true);
  //       imgElement.onerror = () => console.error("Image failed to load");
  //     }
  //   }
  // }, []);

  // const downloadImage = () => {
  //   if (!imageLoaded) {
  //     alert("Please wait, the image is still loading...");
  //     return;
  //   }

  //   const element = document.getElementById("captureArea");
  //   const captureButton = document.getElementById("captureButton");
  //   const pipeSizeButton = document.getElementById("pipeSizeButton");

  //   // Hide buttons before capturing
  //   if (captureButton) captureButton.style.display = "none";
  //   if (pipeSizeButton) pipeSizeButton.style.display = "none";

  //   html2canvas(element, { logging: true, useCORS: true, backgroundColor: "white", scale: 2 })
  //     .then((canvas) => {
  //       const dataUrl = canvas.toDataURL("image/png");

  //       // Open the image in a new tab
  //       const newTab = window.open();
  //       newTab.document.write('<img src="' + dataUrl + '" />');

  //       // Optional: Allow download
  //       const link = document.createElement("a");
  //       link.href = dataUrl;
  //       link.download = "downloaded-image.png";
  //       link.click();
  //     })
  //     .catch((error) => console.error("Error generating image:", error))
  //     .finally(() => {
  //       // Restore button visibility
  //       if (captureButton) captureButton.style.display = "flex";
  //       if (pipeSizeButton) pipeSizeButton.style.display = "flex";
  //     });
  // };

  
  return (
    <div>
    {
      loading && <div style={{width: '100vw', height: '100vh', position: 'fixed', top: 0, left: 0, backgroundColor: 'rgba(0, 0, 0, 0.6)', zIndex: 1000, display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '1.4rem'}}>
        Capturing image, please wait...
      </div>
    }
    <div id="captureArea" >
      {/* <div> */}
      
      <div
        style={{
          padding: "0.3rem 0rem",
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          width: "100%",
          justifyContent: "space-between",
          backgroundColor: 'black'
        }}
      >
        {/* <div
          className="pipecount-date-container"
          style={{
            color: "white",
            display: "flex",
            width: "100%",
            alignItems: "center",
            justifyContent: "center",
          }}
        >
          <h2 className="pipe-count">Total Pipes - {count}</h2>
        </div> */}
<h2 className="pipe-count">Total Pipes - {count}</h2>
        {/* <div style={{display: 'flex', flexDirection: 'column', fontSize: '1.3rem', padding: '1rem'}}> */}
        <div
          className="type-wise-count"
          style={{ display: "flex", flexWrap: "wrap", padding: "0.5rem", width: '100%' }}
        >
          {Object.entries(typeCount).map(([pipeType, quantity]) =>
            quantity > 0 ? (
              <span
                className="each-type-count"
                key={pipeType}
                style={{
                  color: "white",
                  backgroundColor:
                    pipeType == 1
                      ? "rgba(146, 85, 11, 0.2)"
                      : pipeType == 2
                      ? "rgba(138, 138, 212, 0.2)"
                      : pipeType == 3
                      ? "rgba(253, 0, 0, 0.28)"
                      : pipeType == 4
                      ? "rgba(0, 253, 13, 0.16)"
                      : "rgba(223, 0, 253, 0.21)",
                  padding: "0.4rem 0.6rem",
                  borderRadius: "8px",
                  border: `1px solid ${
                    pipeType == 1
                      ? "yellow"
                      : pipeType == 2
                      ? "blue"
                      : pipeType == 3
                      ? "red"
                      : pipeType == 4
                      ? "green"
                      : "purple"
                  }`,
                }}
              >
                {pipeType}× pipes: {pipeType} × {quantity} ={" "}
                {pipeType * quantity}
              </span>
            ) : null
          )}
        </div>
        {/* </div> */}

        <span className="capture-date">
          Date - {new Date("2025-03-06T12:42:31.864629").toLocaleString()}
        </span>
        <div
          id="pipeSizeButton"
          style={{
            display: "flex",
            flexDirection: 'column',
            alignItems: "center",
            justifyContent: "space-evenly",
            width: "3rem",
            height: "18rem",
            position: "fixed",
            bottom: "6rem",
            right: "0.4rem",
            zIndex: "999",
          }}
        >
          <div
            className="each-pipesizeButton"
            onClick={() => setPipeColor(1)}
            style={{
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              backgroundColor: "orange",
              fontSize: "1.2rem",
              borderRadius: "50%",
              cursor: "pointer",
            }}
          >
            1
          </div>
          <div
            className="each-pipesizeButton"
            onClick={() => setPipeColor(2)}
            style={{
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              backgroundColor: "blue",
              fontSize: "1.2rem",
              borderRadius: "50%",
              cursor: "pointer",
            }}
          >
            2
          </div>
          <div
            className="each-pipesizeButton"
            onClick={() => setPipeColor(3)}
            style={{
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              backgroundColor: "red",
              fontSize: "1.2rem",
              borderRadius: "50%",
              cursor: "pointer",
            }}
          >
            3
          </div>
          <div
            className="each-pipesizeButton"
            onClick={() => setPipeColor(4)}
            style={{
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              backgroundColor: "green",
              fontSize: "1.2rem",
              borderRadius: "50%",
              cursor: "pointer",
            }}
          >
            4
          </div>
          <div
            className="each-pipesizeButton"
            onClick={() => setPipeColor(5)}
            style={{
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              backgroundColor: "purple",
              fontSize: "1.2rem",
              borderRadius: "50%",
              cursor: "pointer",
            }}
          >
            5
          </div>
          <div
            id="captureButton"
            style={{
              backgroundColor: "red",
              height: "2.7rem",
              width: "2.7rem",
              borderRadius: "50%",
              display: "flex",
              justifyContent: "center",
              alignItems: "center",
              cursor: "pointer",
            }}
            onClick={downloadImage}
          >
            <FaCamera />
          </div>
        </div>
      </div>
      <div style={{ position: "relative", width: "100%" }}>

        <img
          id="imageToCapture"
          src={
            "https://alvision-count.s3.ap-south-1.amazonaws.com/count/DrawTest/original/2025/03/original_9a470183-4736-456e-a0ba-436a11dc8825.png"
          } // Your image source
          onError={() => console.error("Image failed to load")}
          // onLoad={() => setImageLoaded(true)}
          // key={uniqueImageUrl}
          ref={imageRef}
          // src={uniqueImageUrl}
          style={{ width: "100%", display: "block" }}
          alt="Pipes"
          onClick={handleImageClick}
          crossOrigin="anonymous"
          // onLoad={() => {
          //   if (imageRef.current) {
          //     setImageSize({
          //       width: imageRef.current.clientWidth,
          //       height: imageRef.current.clientHeight,
          //     });
          //   }
          // }}
        />
        <div style={{ position: "absolute", top: 0, left: 0, width: "100%" }}>
          {boxes.map((coordinates, index) => {
            cumulativeSum += coordinates[4]; // pipeCount is the 5th element
            return (
              <Box
                key={JSON.stringify(coordinates)}
                coordinates={coordinates}
                imageSize={imageSize}
                index={index}
                setCount={setCount} // Pass down the setCount function to Box component
                pipeColor={pipeColor}
                setTypeCount={setTypeCount}
                setBoxes={setBoxes}
                setPipeColor={setPipeColor}
                cumulativeSum={cumulativeSum}
                // resize={resize}
              />
            );
          })}
        </div>
      </div>

<div className="p-4" style={{display: 'flex', justifyContent: 'center', color: 'white', backgroundColor: '#282828', marginTop: '2rem', marginBottom: '1rem'}}>
      <table border={1} className="border-collapse border border-gray-400 w-full" style={{width: '100%', fontSize: '1.1rem' }}>
        <thead  >
          <tr className="bg-gray-200">
            {/* <td colSpan="2" className="border border-gray-400 p-2 flex justify-center items-center">
            <img src={"https://manavsevatrust.com/wp-content/uploads/2020/12/Tata-Motors-Logo.png"} alt="alluvium logo" style={{ height: '3.5rem'}} />
            </td> */}
            <td colSpan="2" className="border border-gray-400 p-2 text-center align-middle">
      <div style={{ display: "flex", justifyContent: "center", alignItems: "center", height: "100%" }}>
        <img 
          src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Ford-Motor-Company-Logo.png" 
          alt="alluvium logo" 
          style={{ height: '3.7rem'}} 
        />
      </div>
    </td>
            
            <td className="border border-gray-400 p-2" style={{ backgroundColor: 'lightgrey'}}>Truck Number</td>
            <td className="border border-gray-400 p-2"  style={{backgroundColor: 'lightgrey'}}>MH-01-HJ-1234</td>
          </tr>
        </thead>
        <thead style={{backgroundColor: 'lightgrey'}}>
          <tr className="bg-gray-300">
            <td className="border border-gray-400 p-2" >Client Name</td>
            <td className="border border-gray-400 p-2">Yash Gupta</td>
            <td className="border border-gray-400 p-2">Driver Name</td>
            <td className="border border-gray-400 p-2">Kalpesh</td>
          </tr>
        </thead>
        <thead>
          <tr className="bg-gray-400" style={{backgroundColor: 'lightgrey', fontSize: '1.1rem'}}>
            <td className="border border-gray-400 p-2">Pipe Types</td>
            <td className="border border-gray-400 p-2">Select Size</td>
            <td className="border border-gray-400 p-2">NOS</td>
            <td className="border border-gray-400 p-2">Remarks</td>
          </tr>
        </thead>
        <tbody>

        {Object.entries(initialCounts).map(([pipeType, quantity], index) =>
          quantity > 0 ? (
            <tr key={index}>
            <td className="border border-gray-400 p-2">Type {pipeType}</td>
            <td className="border border-gray-400 p-2">{pipeType} X {quantity}</td>
            <td className="border border-gray-400 p-2">{pipeType*quantity}</td>
            <td className="border border-gray-400 p-2">-</td>
          </tr>
          ): null)}
          
        </tbody>

         {/* Total Count Row */}
         <tfoot  style={{backgroundColor: 'lightgrey'}}>
         <tr>
            {/* <td colSpan="4" className="border border-gray-400 p-4 text-center font-bold bg-gray-300 align-middle h-12" style={{fontWeight: 600}}>
            Total Count - {count}
            </td> */}

            <td colSpan="4" className="border border-gray-400 p-2 text-center align-middle">
      <div style={{ display: "flex", justifyContent: "center", alignItems: "center", height: "100%", fontSize: '1.2rem' }}>
      Total Count - {count}
      </div>
    </td>
          </tr>
        </tfoot>
      </table>
    </div>

    {/* --------logo--------- */}
    <div
        style={{
          width: "100%",
          height: "4rem",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
        }}
      >
        <img className="logo" src={logo} alt="alluvium logo" />
      </div>
      {/* ---------------hsl video----------- */}
      {/* <div>
      <h2>HLS Stream Player</h2>
      <HLSPlayer src="http://0.0.0.0:8010/hls/hi_alluvium.in/hi_alluvium.in_5e70a741/playlist.m3u8" />
    </div> */}
    </div>
    </div>
  );
};

export default App;
